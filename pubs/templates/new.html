{% extends "base.html" %}

{% block main %}
<h1>Publication Database</h1>
<article class="new">
  {% if error %}
  <div class="error_box">{{ error }}</div>
  {% end %}
  <h2>Enter new publication info:</h2>
  <form action="{{ request.path }}" method="post">
    <div class="input vcenter"><label for="title">Title: </label><input type="text" name="title" /></div>
    <div class="input"><label for="existing_authors">Existing Authors: </label><select name="existing_authors" multiple>
      {% for name in existing_authors %}
      <option value="{{ name }}">{{ name }}</option>
      {% end %}
    </select></div>
    <div class="input"><label for="new_authors">New Authors: </label><textarea name="new_authors"></textarea></div>
    <div class="input vcenter"><label for="date">Date of publication: </label><input type="date" name="date" /></div>
    <div class="input vcenter"><label for="type">Publication Type: </label><select name="type">
      {% for t in PUBLICATION_TYPES %}
      <option value="{{ t }}">{{ PUBLICATION_TYPES[t] }}</option>
      {% end %}
    </select></div>
    <div class="input"><label for="citation">Citation:</label><textarea name="citation"></textarea></div>
    <div class="input"><label for="downloads">Download links:</label><textarea name="downloads"></textarea></div>
    <div class="input"><label for="projects">Project: </label><div class="projects_box">
      {% for p in PROJECTS %}
      <div class="checkbox">
        <input type="checkbox" name="projects" id="projects_{{ p }}" value="{{ p }}" />
        <label for="projects_{{ p }}">{{ PROJECTS[p] }}</label>
      </div>
      {% end %}
    </div></div>
    {% module xsrf_form_html() %}
    <div class="input"><input type="submit" value="Create" /></div>
  </form>
</article>
{% end %}